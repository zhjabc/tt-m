"use strict";(self["webpackChunktoutiao_m"]=self["webpackChunktoutiao_m"]||[]).push([[288],{9136:function(t,s,i){i.r(s),i.d(s,{default:function(){return h}});var e=function(){var t=this,s=t._self._c;return s("div",[s("div",{staticClass:"search-header"},[s("van-icon",{staticClass:"goback",attrs:{name:"arrow-left",color:"white",size:"0.48rem"},on:{click:function(s){return t.$router.back()}}}),s("van-search",{directives:[{name:"gfocus",rawName:"v-gfocus"}],attrs:{placeholder:"请输入搜索关键词",background:"#007BFF",shape:"round"},on:{input:t.inputFn,search:t.searchFn},model:{value:t.kw,callback:function(s){t.kw="string"===typeof s?s.trim():s},expression:"kw"}})],1),""!==t.kw?s("div",{staticClass:"sugg-list"},t._l(t.suggestionList,(function(i,e){return s("div",{key:e,staticClass:"sugg-item",domProps:{innerHTML:t._s(t.lightFn(i,t.kw))},on:{click:function(s){return t.suggestClickFn(i)}}},[t._v(" 搜索建议 ")])})),0):s("div",{staticClass:"search-history"},[s("van-cell",{attrs:{title:"搜索历史"},scopedSlots:t._u([{key:"right-icon",fn:function(){return[s("van-icon",{staticClass:"search-icon",attrs:{name:"delete"},on:{click:t.clearHistoryFn}})]},proxy:!0}])}),s("div",{staticClass:"history-list"},t._l(t.history,(function(i,e){return s("span",{key:e,staticClass:"history-item",on:{click:function(s){return t.historyClickFn(i)}}},[t._v(t._s(i))])})),0)],1)])},r=[],n=i(586),o=i(7247),a={name:"MySearch",data(){return{kw:"",timer:null,suggestionList:[],history:JSON.parse((0,o.cF)("history"))||[]}},watch:{history:{deep:!0,handler(){const t=new Set(this.history),s=Array.from(t);(0,o.po)("history",JSON.stringify(s))}}},methods:{inputFn(t){clearTimeout(this.timer),this.timer=setTimeout((async()=>{if(0===this.kw.length)return void(this.suggestionList=[]);const t=await(0,n.GG)(this.kw);this.suggestionList=t.data.data.options}),500)},lightFn(t,s){if(null===t)return;const i=new RegExp(s,"ig");return t.replace(i,(t=>`<span style="color:red;">${t}</span>`))},searchFn(t){0!==t.length&&(this.history.push(t),setTimeout((()=>{this.$router.push(`/search/${t}`)})))},suggestClickFn(t){this.history.push(t),setTimeout((()=>{this.$router.push(`/search/${t}`)}))},historyClickFn(t){this.$router.push(`/search/${t}`)},clearHistoryFn(){this.history=[]}}},c=a,u=i(1001),l=(0,u.Z)(c,e,r,!1,null,"a4c2d6f2",null),h=l.exports},7247:function(t,s,i){i.d(s,{cF:function(){return r},po:function(){return e}});const e=(t,s)=>{localStorage.setItem(t,s)},r=t=>localStorage.getItem(t)}}]);
//# sourceMappingURL=Search.6cd01698.js.map